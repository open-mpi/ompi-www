<html><head><base href="x-msg://158/"></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">The application is terminated and an error message is reported out:<div><br></div><div><div>mpirun has exited due to process rank 0 with PID 72438 on</div><div>node Ralph exiting improperly. There are two reasons this could occur:</div><div><br></div><div>1. this process did not call "init" before exiting, but others in</div><div>the job did. This can cause a job to hang indefinitely while it waits</div><div>for all processes to call "init". By rule, if one process calls "init",</div><div>then ALL processes must call "init" prior to termination.</div><div><br></div><div>2. this process called "init", but exited without calling "finalize".</div><div>By rule, all processes that call "init" MUST call "finalize" prior to</div><div>exiting or it will be considered an "abnormal termination"</div><div><br></div><div>This may have caused other processes in the application to be</div><div>terminated by signals sent by mpirun (as reported here).</div><div><br></div><div><br></div><div><div>On Dec 18, 2009, at 8:32 AM, Katz, Jacob wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite"><div lang="EN-US" link="blue" vlink="purple" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div class="Section1"><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Thanks for the fix. What will be the exact behavior after your fix?<o:p></o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p>&nbsp;</o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Re timeouts: Timeout may be indefinite for compliance with the standard. However, apps might optionally use it for their convenience, like in my case. No need to guess anything, but would prevent stuck apps.<o:p></o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Unlike regular communication, where one may implement timeout mechanism at application level using non-blocking communication, there is no way to implement an app-level time-out for bootstrapping process since MPI_Init blocks.<o:p></o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p>&nbsp;</o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p>&nbsp;</o:p></span></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">--------------------------------</span><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p></o:p></span></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">Jacob M. Katz</span></b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); "><span class="Apple-converted-space">&nbsp;</span>|<span class="Apple-converted-space">&nbsp;</span></span><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); "><a href="mailto:jacob.katz@intel.com" style="color: blue; text-decoration: underline; "><span style="color: rgb(31, 73, 125); ">jacob.katz@intel.com</span></a><span class="Apple-converted-space">&nbsp;</span>|<span class="Apple-converted-space">&nbsp;</span><b>Work:</b><span class="Apple-converted-space">&nbsp;</span>+972-4-865-5726 |<span class="Apple-converted-space">&nbsp;</span></span><b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">iNet:<span class="Apple-converted-space">&nbsp;</span></span></b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">(8)-465-5726</span><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p></o:p></span></div></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); "><o:p>&nbsp;</o:p></span></div><div><div style="border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-top-style: solid; border-top-color: rgb(181, 196, 223); border-top-width: 1pt; padding-top: 3pt; padding-right: 0in; padding-bottom: 0in; padding-left: 0in; "><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Tahoma, sans-serif; ">From:</span></b><span style="font-size: 10pt; font-family: Tahoma, sans-serif; "><span class="Apple-converted-space">&nbsp;</span><a href="mailto:users-bounces@open-mpi.org" style="color: blue; text-decoration: underline; ">users-bounces@open-mpi.org</a><span class="Apple-converted-space">&nbsp;</span>[mailto:users-bounces@open-mpi.org]<span class="Apple-converted-space">&nbsp;</span><b>On Behalf Of<span class="Apple-converted-space">&nbsp;</span></b>Ralph Castain<br><b>Sent:</b><span class="Apple-converted-space">&nbsp;</span>Friday, December 18, 2009 16:50<br><b>To:</b><span class="Apple-converted-space">&nbsp;</span>Open MPI Users<br><b>Subject:</b><span class="Apple-converted-space">&nbsp;</span>Re: [OMPI users] How to detect a failure to start-up and MPI_Init()?<o:p></o:p></span></div></div></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Unfortunately, the timeout won't work as there is no MPI requirement to call MPI_Init before some specific point in the application. This would create an experimental process to "guess" the correct timeout on an application-by-application basis - ugly.<o:p></o:p></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">I have committed code to the OMPI trunk that fixes this problem for the general case. Managed to do it without the extra communication, though it required a little more complexity in the launch logic.<o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Anyway, the problem appears resolved on that code branch. Given the required change, I do not expect this to appear in the 1.4 series - work is progressing on the first release of the next feature series (1.5), and it will be in there. Meantime, you are welcome to use a nightly tarball from the devel trunk as it appears to be in pretty good shape right now in prep for the 1.5 branch.<o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Thanks<o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Ralph<o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">On Dec 18, 2009, at 7:06 AM, Katz, Jacob wrote:<o:p></o:p></div></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><br><br><o:p></o:p></div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Yes, the scenario is as you described: one of the processes didn’t call MPI_Init and exited “normally”. All the rest of the processes got stuck forever in MPI_Init.</span><o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Ideally, I would like to have a time-out setting for a process to call MPI_Init, which when expired would indicate a failure to start-up (as if the processes aborted). The time-out may be indefinite by default, for backward compatibility. No extra communication if no time-out happens…</span><o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span><o:p></o:p></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">--------------------------------</span><o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">Jacob M. Katz</span></b><span class="apple-converted-space"><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span></span><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">|<span class="apple-converted-space">&nbsp;</span><a href="mailto:jacob.katz@intel.com" style="color: blue; text-decoration: underline; "><span style="color: rgb(31, 73, 125); ">jacob.katz@intel.com</span></a><span class="apple-converted-space">&nbsp;</span>|<span class="apple-converted-space">&nbsp;</span><b>Work:</b><span class="apple-converted-space">&nbsp;</span>+972-4-865-5726 |<span class="apple-converted-space">&nbsp;</span><b>iNet:<span class="apple-converted-space">&nbsp;</span></b>(8)-465-5726</span><o:p></o:p></div></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span><o:p></o:p></div></div><div><div style="border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-top-style: solid; padding-top: 3pt; padding-right: 0in; padding-bottom: 0in; padding-left: 0in; border-width: initial; border-color: initial; "><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Tahoma, sans-serif; ">From:</span></b><span class="apple-converted-space"><span style="font-size: 10pt; font-family: Tahoma, sans-serif; ">&nbsp;</span></span><span style="font-size: 10pt; font-family: Tahoma, sans-serif; "><a href="mailto:users-bounces@open-mpi.org" style="color: blue; text-decoration: underline; ">users-bounces@open-mpi.org</a><span class="apple-converted-space">&nbsp;</span>[mailto:users-bounces@open-mpi.org]<span class="apple-converted-space">&nbsp;</span><b>On Behalf Of<span class="apple-converted-space">&nbsp;</span></b>Ralph Castain<br><b>Sent:</b><span class="apple-converted-space">&nbsp;</span>Wednesday, December 16, 2009 05:55<br><b>To:</b><span class="apple-converted-space">&nbsp;</span>Open MPI Users<br><b>Subject:</b><span class="apple-converted-space">&nbsp;</span>Re: [OMPI users] How to detect a failure to start-up and MPI_Init()?</span><o:p></o:p></div></div></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Finally got time to look at this - not sure this is a bug, if I understand correctly your scenario.<o:p></o:p></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">When you say the application exits, do you mean it calls "exit" - or do you mean it segfaults or some other such abnormal termination?<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Reason I ask: if the process has not yet called MPI_Init and instead calls "exit", as far as we are concerned that is a normal termination. So we note that it happened, but we don't consider it as having "aborted" - and hence, we don't terminate the job.<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">If that is indeed the scenario, then trying to resolve it is a tad difficult. Although we don't advise it, people do frequently have their apps do a bunch of stuff prior to calling MPI_Init. So there is no timer I can set that would alert me that the job is stuck - could just be waiting for one or more procs to reach MPI_Init (e.g., reading a large input file).<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Only thing I can think of would be to (a) detect that other procs in the job had called MPI_Init, (b) note that this one did -not- call MPI_Init/Finalize prior to terminating, and therefore (c) declare the job as having failed.<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">This might be doable. Tad complicated if, for example, there is only one proc/node as now the daemons have to know that other procs (not local to them) called MPI_Init.<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">I'll have to ask the MPI folks on the team if that is something we want to do as it could affect scalability by requiring more communication...not sure how this fits into the std either.<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Ralph<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">On Dec 15, 2009, at 8:47 AM, Katz, Jacob wrote:<o:p></o:p></div></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><br><br><br><o:p></o:p></div></div><div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Ralph,</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Have you been able to confirm this as a bug?</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">Thanks!</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">--------------------------------</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">Jacob M. Katz</span></b><span class="apple-converted-space"><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span></span><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">|<span class="apple-converted-space">&nbsp;</span></span><a href="mailto:jacob.katz@intel.com" style="color: blue; text-decoration: underline; "><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">jacob.katz@intel.com</span></a><span class="apple-converted-space"><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span></span><span style="font-size: 10pt; font-family: Arial, sans-serif; color: rgb(31, 73, 125); ">|<span class="apple-converted-space">&nbsp;</span><b>Work:</b><span class="apple-converted-space">&nbsp;</span>+972-4-865-5726 |<span class="apple-converted-space">&nbsp;</span><b>iNet:<span class="apple-converted-space">&nbsp;</span></b>(8)-465-5726</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: rgb(31, 73, 125); ">&nbsp;</span><o:p></o:p></div></div></div><div style="border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-top-style: solid; padding-top: 3pt; padding-right: 0in; padding-bottom: 0in; padding-left: 0in; border-width: initial; border-color: initial; border-width: initial; border-color: initial; "><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; font-family: Tahoma, sans-serif; ">From:</span></b><span class="apple-converted-space"><span style="font-size: 10pt; font-family: Tahoma, sans-serif; ">&nbsp;</span></span><span style="font-size: 10pt; font-family: Tahoma, sans-serif; "><a href="mailto:users-bounces@open-mpi.org" style="color: blue; text-decoration: underline; ">users-bounces@open-mpi.org</a><span class="apple-converted-space">&nbsp;</span>[mailto:users-bounces@open-mpi.org]<span class="apple-converted-space">&nbsp;</span><b>On Behalf Of<span class="apple-converted-space">&nbsp;</span></b>Ralph Castain<br><b>Sent:</b><span class="apple-converted-space">&nbsp;</span>Sunday, December 06, 2009 19:24<br><b>To:</b><span class="apple-converted-space">&nbsp;</span>Open MPI Users<br><b>Subject:</b><span class="apple-converted-space">&nbsp;</span>Re: [OMPI users] How to detect a failure to start-up and MPI_Init()?</span><o:p></o:p></div></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><p class="MsoNormal" style="margin-top: 0in; margin-right: 0in; margin-bottom: 12pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">I'll look into it - sounds like a bug<br><br>Thanks!<o:p></o:p></p><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">On Sun, Dec 6, 2009 at 9:13 AM, Katz, Jacob &lt;<a href="mailto:jacob.katz@intel.com" style="color: blue; text-decoration: underline; ">jacob.katz@intel.com</a>&gt; wrote:<o:p></o:p></div></div></div><div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; color: rgb(31, 73, 125); ">I’m using 1.3.3.</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; color: rgb(31, 73, 125); ">The job isn’t aborted &nbsp;in my case when the failing process haven’t called MPI_Init… It is aborted if the process have called MPI_Init…</span><o:p></o:p></div></div></div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; color: rgb(31, 73, 125); ">&nbsp;</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 10pt; color: rgb(31, 73, 125); ">--------------------------------</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; color: rgb(31, 73, 125); ">Jacob M. Katz</span></b><span class="apple-converted-space"><span style="font-size: 10pt; color: rgb(31, 73, 125); ">&nbsp;</span></span><span style="font-size: 10pt; color: rgb(31, 73, 125); ">|<span class="apple-converted-space">&nbsp;</span><a href="mailto:jacob.katz@intel.com" target="_blank" style="color: blue; text-decoration: underline; "><span style="color: rgb(31, 73, 125); ">jacob.katz@intel.com</span></a><span class="apple-converted-space">&nbsp;</span>|<span class="apple-converted-space">&nbsp;</span><b>Work:</b><span class="apple-converted-space">&nbsp;</span>+972-4-865-5726 |<span class="apple-converted-space">&nbsp;</span><b>iNet:<span class="apple-converted-space">&nbsp;</span></b>(8)-465-5726</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 11pt; color: rgb(31, 73, 125); ">&nbsp;</span><o:p></o:p></div></div></div></div><div style="border-right-style: none; border-bottom-style: none; border-left-style: none; border-width: initial; border-color: initial; border-top-style: solid; padding-top: 3pt; padding-right: 0in; padding-bottom: 0in; padding-left: 0in; border-width: initial; border-color: initial; border-width: initial; border-color: initial; "><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; ">From:</span></b><span class="apple-converted-space"><span style="font-size: 10pt; ">&nbsp;</span></span><span style="font-size: 10pt; "><a href="mailto:users-bounces@open-mpi.org" target="_blank" style="color: blue; text-decoration: underline; ">users-bounces@open-mpi.org</a><span class="apple-converted-space">&nbsp;</span>[mailto:<a href="mailto:users-bounces@open-mpi.org" target="_blank" style="color: blue; text-decoration: underline; ">users-bounces@open-mpi.org</a>]<span class="apple-converted-space">&nbsp;</span><b>On Behalf Of<span class="apple-converted-space">&nbsp;</span></b>Ralph Castain<br><b>Sent:</b><span class="apple-converted-space">&nbsp;</span>Sunday, December 06, 2009 17:44<br><b>To:</b><span class="apple-converted-space">&nbsp;</span>Open MPI Users<br><b>Subject:</b><span class="apple-converted-space">&nbsp;</span>Re: [OMPI users] How to detect a failure to start-up and MPI_Init()?</span><o:p></o:p></div></div></div></div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><p class="MsoNormal" style="margin-top: 0in; margin-right: 0in; margin-bottom: 12pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">The system should see that app fail and abort the job - whether it calls MPI_Init first or not is irrelevant. What version are you using?<o:p></o:p></p><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">On Sun, Dec 6, 2009 at 8:40 AM, Katz, Jacob &lt;<a href="mailto:jacob.katz@intel.com" target="_blank" style="color: blue; text-decoration: underline; ">jacob.katz@intel.com</a>&gt; wrote:<o:p></o:p></div></div></div><div><div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Hi,<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Is there a way to detect a situation than one of the processes in an MPI application exits without even calling MPI_Init()?<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">I have a case in which all the processes except one are stuck forever in MPI_Init(), and that one exits before being able to call MPI_Init()…<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">I tried using the mca params that I thought might be related - orte_startup_timeout, orte_abort_timeout, but that didn’t help.<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">Thanks!<o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 10pt; ">--------------------------------</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><b><span style="font-size: 10pt; ">Jacob M. Katz</span></b><span class="apple-converted-space"><span style="font-size: 10pt; ">&nbsp;</span></span><span style="font-size: 10pt; ">|<span class="apple-converted-space">&nbsp;</span><a href="mailto:jacob.katz@intel.com" target="_blank" style="color: blue; text-decoration: underline; "><span style="color: windowtext; ">jacob.katz@intel.com</span></a><span class="apple-converted-space">&nbsp;</span>|<span class="apple-converted-space">&nbsp;</span><b>Work:</b><span class="apple-converted-space">&nbsp;</span>+972-4-865-5726 |<span class="apple-converted-space">&nbsp;</span><b>iNet:<span class="apple-converted-space">&nbsp;</span></b>(8)-465-5726</span><o:p></o:p></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div></div><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">---------------------------------------------------------------------<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">Intel Israel (74) Limited<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">&nbsp;<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">This e-mail and any attachments may contain confidential material for<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">the sole use of the intended recipient(s). Any review or distribution<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">by others is strictly prohibited. If you are not the intended<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">recipient, please contact the sender and delete all copies.<o:p></o:p></pre></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" target="_blank" style="color: blue; text-decoration: underline; ">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" style="color: blue; text-decoration: underline; ">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><o:p></o:p></div></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div></div></div><div><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">---------------------------------------------------------------------<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">Intel Israel (74) Limited<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">&nbsp;<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">This e-mail and any attachments may contain confidential material for<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">the sole use of the intended recipient(s). Any review or distribution<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">by others is strictly prohibited. If you are not the intended<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">recipient, please contact the sender and delete all copies.<o:p></o:p></pre></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><br>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" style="color: blue; text-decoration: underline; ">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" target="_blank" style="color: blue; text-decoration: underline; ">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><o:p></o:p></div></div></div></div><div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div></div><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">---------------------------------------------------------------------<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">Intel Israel (74) Limited<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">&nbsp;<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">This e-mail and any attachments may contain confidential material for<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">the sole use of the intended recipient(s). Any review or distribution<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">by others is strictly prohibited. If you are not the intended<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">recipient, please contact the sender and delete all copies.<o:p></o:p></pre><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 13.5pt; font-family: Helvetica, sans-serif; ">_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" style="color: blue; text-decoration: underline; ">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="color: blue; text-decoration: underline; ">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></span><o:p></o:p></div></div></div></div><div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; ">&nbsp;<o:p></o:p></div></div></div></div><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">---------------------------------------------------------------------<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">Intel Israel (74) Limited<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; "><o:p>&nbsp;</o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">This e-mail and any attachments may contain confidential material for<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">the sole use of the intended recipient(s). Any review or distribution<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">by others is strictly prohibited. If you are not the intended<o:p></o:p></pre><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">recipient, please contact the sender and delete all copies.<o:p></o:p></pre><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><span style="font-size: 13.5pt; font-family: Helvetica, sans-serif; ">_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" style="color: blue; text-decoration: underline; ">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="color: blue; text-decoration: underline; ">http://www.open-mpi.org/mailman/listinfo.cgi/users</a><o:p></o:p></span></div></div></div><div style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 12pt; font-family: 'Times New Roman', serif; "><o:p>&nbsp;</o:p></div></div></div><pre style="margin-top: 0in; margin-right: 0in; margin-bottom: 0.0001pt; margin-left: 0in; font-size: 10pt; font-family: 'Courier New'; ">---------------------------------------------------------------------
Intel Israel (74) Limited

This e-mail and any attachments may contain confidential material for
the sole use of the intended recipient(s). Any review or distribution
by others is strictly prohibited. If you are not the intended
recipient, please contact the sender and delete all copies.
</pre>_______________________________________________<br>users mailing list<br><a href="mailto:users@open-mpi.org" style="color: blue; text-decoration: underline; ">users@open-mpi.org</a><br><a href="http://www.open-mpi.org/mailman/listinfo.cgi/users" style="color: blue; text-decoration: underline; ">http://www.open-mpi.org/mailman/listinfo.cgi/users</a></div></blockquote></div><br></div></body></html>
